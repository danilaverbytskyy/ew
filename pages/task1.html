<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Конкурс 1 - Викторина</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #FF6B6B;
            --secondary-color: #4CC9F0;
            --accent-color: #20C997;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background-color: #f8f9fa;
            padding-bottom: 2rem;
        }

        .header-bar {
            background: linear-gradient(135deg, var(--primary-color), #FF8E8E);
            color: white;
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .progress-container {
            background: white;
            border-radius: 50px;
            padding: 0.3rem;
            margin-top: 0.5rem;
        }

        .progress-bar {
            background-color: var(--accent-color);
            border-radius: 50px;
            transition: width 0.5s ease;
        }

        .question-card {
            padding: 1.5rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin: 1rem 0;
            display: none;
        }

        .question-card.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
        }

        .answer-input {
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 0.8rem;
            font-size: 1rem;
            width: 100%;
            margin-bottom: 1rem;
        }

        .check-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.8rem;
            font-size: 1rem;
            width: 100%;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }

        .check-btn:hover {
            background-color: #3aa8d8;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
        }

        .nav-btn {
            background-color: #e9ecef;
            border: none;
            border-radius: 8px;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background-color: #dee2e6;
        }

        .feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            background-color: #f8f9fa;
            display: none;
        }

        .correct-feedback {
            background-color: #d4edda;
            color: #155724;
        }

        .time-stamp {
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 0.5rem;
        }

        .explanation {
            margin-top: 0.5rem;
            font-style: italic;
        }

        .home-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.7rem 1.2rem;
            font-size: 1rem;
            margin-top: 1.5rem;
            display: block;
            width: 100%;
            text-align: center;
            text-decoration: none;
            transition: all 0.3s;
        }

        .home-btn:hover {
            background-color: #e05555;
            color: white;
            transform: translateY(-2px);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 576px) {
            .question-card {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="header-bar">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <div id="userNameDisplay" class="fw-bold"></div>
                <div id="progressCount">0/20</div>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <div class="container mt-4">
        <div id="questionsContainer">
            <!-- Вопросы будут добавлены через JS -->
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" id="prevBtn" onclick="prevQuestion()">← Назад</button>
            <span id="questionCounter">1/20</span>
            <button class="nav-btn" id="nextBtn" onclick="nextQuestion()">Далее →</button>
        </div>

        <!-- Новая кнопка возврата на главную -->
        <a href="../index.html" class="home-btn">Вернуться на главную</a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 20 вопросов с ответами и пояснениями
        const questions = [
            {
                question: "Сколько дане лет?",
                answer: ["20", "двадцать"],
                explanation: "Действительно, данечке уже 20 лет."
            },
            {
                question: "Какое самое глубокое озеро в мире?",
                answer: "байкал",
                explanation: "Озеро Байкал в России имеет глубину 1642 метра - это самое глубокое озеро на Земле."
            },
            {
                question: "Сколько континентов на Земле?",
                answer: "6",
                explanation: "Европа, Азия, Африка, Америка (Северная и Южная считаются одним континентом), Австралия и Антарктида."
            },
            {
                question: "Какая самая длинная река в мире?",
                answer: "амазонка",
                explanation: "Длина Амазонки составляет около 6992 км, что делает ее длиннее Нила."
            },
            {
                question: "Как называется самая большая планета Солнечной системы?",
                answer: "юпитер",
                explanation: "Юпитер в 11 раз больше Земли по диаметру и в 318 раз массивнее."
            },
            {
                question: "Какой химический элемент обозначается символом 'Au'?",
                answer: "золото",
                explanation: "Символ Au происходит от латинского названия золота - Aurum."
            },
            {
                question: "Какое животное является символом Австралии?",
                answer: "кенгуру",
                explanation: "Кенгуру изображены на гербе Австралии и являются ее неофициальным символом."
            },
            {
                question: "Как называется столица Японии?",
                answer: "токио",
                explanation: "Токио - один из самых густонаселенных городов мира с населением около 14 миллионов человек."
            },
            {
                question: "Какое самое жаркое место на Земле?",
                answer: "долина смерти",
                explanation: "В Долине Смерти (Калифорния) зафиксирована температура +56.7°C."
            },
            {
                question: "Как называется самая большая пустыня в мире?",
                answer: "сахара",
                explanation: "Площадь Сахары составляет около 9.2 млн км², что сравнимо с площадью Китая."
            },
            {
                question: "Какой язык самый распространенный в мире по числу носителей?",
                answer: "китайский",
                explanation: "На китайском говорят около 1.3 миллиарда человек, преимущественно в Китае."
            },
            {
                question: "Какое самое высокое животное на Земле?",
                answer: "жираф",
                explanation: "Рост жирафа может достигать 5.5-6 метров, причем около половины составляет шея."
            },
            {
                question: "Как называется самая высокая гора в мире?",
                answer: "эверест",
                explanation: "Высота Эвереста составляет 8848 метров над уровнем моря."
            },
            {
                question: "Какой океан самый большой по площади?",
                answer: "тихий",
                explanation: "Площадь Тихого океана составляет около 165 млн км² - больше, чем все суши Земли вместе взятые."
            },
            {
                question: "Какое самое быстрое наземное животное?",
                answer: "гепард",
                explanation: "Гепард может развивать скорость до 110 км/ч, но только на коротких дистанциях."
            },
            {
                question: "Как называется самая маленькая страна в мире?",
                answer: "ватикан",
                explanation: "Площадь Ватикана всего 0.44 км², а население около 800 человек."
            },
            {
                question: "Какое самое большое млекопитающее в мире?",
                answer: "синий кит",
                explanation: "Синий кит может достигать длины 33 метров и веса 150 тонн."
            },
            {
                question: "Как называется самая длинная кость в человеческом теле?",
                answer: "бедренная",
                explanation: "Бедренная кость составляет около 1/4 роста человека."
            },
            {
                question: "Какое растение самое высокое в мире?",
                answer: "секвойя",
                explanation: "Гиперион - самое высокое известное дерево (секвойя вечнозеленая) высотой 115.85 метров."
            },
            {
                question: "Какой фрукт называют 'королем фруктов'?",
                answer: "дуриан",
                explanation: "Дуриан имеет уникальный вкус, но очень неприятный запах, из-за которого его запрещено проносить в общественные места в некоторых странах."
            }
        ];

        let currentQuestion = 0;
        const totalQuestions = questions.length;

        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            const userName = localStorage.getItem('userName') || 'Гость';
            document.getElementById('userNameDisplay').textContent = userName;

            const questionsContainer = document.getElementById('questionsContainer');
            const correctAnswers = JSON.parse(localStorage.getItem('task1CorrectAnswers') || '[]');

            // Создаем карточки вопросов
            questions.forEach((q, index) => {
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.id = `question-${index}`;
                questionCard.innerHTML = `
                    <div>
                        <div class="question-text">Вопрос ${index + 1}: ${q.question}</div>
                        <input type="text" class="answer-input" id="answer-${index}" placeholder="Ваш ответ...">
                        <button class="check-btn" onclick="checkAnswer(${index})">Проверить</button>
                    </div>
                    <div class="feedback" id="feedback-${index}">
                        <div class="correct-feedback">✓ Правильно!</div>
                        <div class="time-stamp" id="timeStamp-${index}"></div>
                        <div class="explanation">${q.explanation}</div>
                    </div>
                `;

                questionsContainer.appendChild(questionCard);

                // Если ответ уже был дан, показываем feedback
                if (correctAnswers.includes(index)) {
                    document.getElementById(`feedback-${index}`).style.display = 'block';
                    document.getElementById(`answer-${index}`).value = localStorage.getItem(`task1-answer-${index}`) || '';
                }
            });

            // Показываем первый вопрос
            showQuestion(0);
            updateProgress();
            updateNavButtons();
        });

        // Показать вопрос
        function showQuestion(index) {
            document.querySelectorAll('.question-card').forEach(card => {
                card.classList.remove('active');
            });

            document.getElementById(`question-${index}`).classList.add('active');
            currentQuestion = index;
            document.getElementById('questionCounter').textContent = `${index + 1}/${totalQuestions}`;
            updateNavButtons();
        }

        // Следующий вопрос
        function nextQuestion() {
            if (currentQuestion < totalQuestions - 1) {
                showQuestion(currentQuestion + 1);
            }
        }

        // Предыдущий вопрос
        function prevQuestion() {
            if (currentQuestion > 0) {
                showQuestion(currentQuestion - 1);
            }
        }

        // Обновление кнопок навигации
        function updateNavButtons() {
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = currentQuestion === totalQuestions - 1;
        }

        // Проверка ответа
        function checkAnswer(index) {
            const userAnswer = document.getElementById(`answer-${index}`).value.trim().toLowerCase();
            const correctAnswer = questions[index].answer.toLowerCase();
            const feedback = document.getElementById(`feedback-${index}`);

            if (userAnswer === correctAnswer) {
                feedback.style.display = 'block';

                // Записываем время ответа
                const now = new Date();
                const timeString = now.toLocaleTimeString();
                document.getElementById(`timeStamp-${index}`).textContent = `Правильно отвечено: ${timeString}`;

                // Сохраняем в localStorage
                let correctAnswers = JSON.parse(localStorage.getItem('task1CorrectAnswers') || '[]');
                if (!correctAnswers.includes(index)) {
                    correctAnswers.push(index);
                    localStorage.setItem('task1CorrectAnswers', JSON.stringify(correctAnswers));
                    localStorage.setItem(`task1-answer-${index}`, userAnswer);

                    // Обновляем баллы на главной странице
                    updateMainPagePoints(correctAnswers.length);
                }

                updateProgress();

                // Вибрация для мобильных
                if ('vibrate' in navigator) {
                    navigator.vibrate(50);
                }
            } else {
                alert("Неправильно, попробуйте еще раз!");
            }
        }

        // Обновление прогресса
        function updateProgress() {
            const correctAnswers = JSON.parse(localStorage.getItem('task1CorrectAnswers') || '[]');
            const progressCount = document.getElementById('progressCount');
            const progressBar = document.getElementById('progressBar');

            const count = correctAnswers.length;
            const percentage = (count / totalQuestions) * 100;

            progressCount.textContent = `${count}/${totalQuestions}`;
            progressBar.style.width = `${percentage}%`;
        }

        // Обновление баллов на главной странице
        function updateMainPagePoints(points) {
            // Если главная страница открыта в другом окне
            if (window.opener) {
                window.opener.updatePoints(points * 5); // 5 баллов за каждый правильный ответ
            }

            // Обновляем в localStorage для главной страницы
            localStorage.setItem('userPoints', (points * 5).toString());
        }
    </script>
</body>
</html>